<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>„Éà„É©„É≥„Ç∑„Éº„Éê„Éº</title>
<style>
body {
  font-family: sans-serif;
  text-align: center;
  padding: 30px;
}
button {
  font-size: 24px;
  padding: 20px 40px;
}
</style>
</head>
<body>

<h1>Êäº„Åó„Å¶Ë©±„Åô</h1>
<button id="talk">üé§ Êäº„Åó„Å¶Ë©±„Åô</button>

<script>
let audioCtx;
let mic;
let processor;

const btn = document.getElementById("talk");

btn.onmousedown = start;
btn.ontouchstart = start;
btn.onmouseup = stop;
btn.ontouchend = stop;

async function start() {
  audioCtx = new AudioContext();
  const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
  mic = audioCtx.createMediaStreamSource(stream);
  processor = audioCtx.createScriptProcessor(1024, 1, 1);
  mic.connect(processor);
  processor.connect(audioCtx.destination);
}

function stop() {
  if (audioCtx) audioCtx.close();
}
</script>

</body>
</html>
